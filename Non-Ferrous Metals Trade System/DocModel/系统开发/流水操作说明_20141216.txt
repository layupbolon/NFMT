库存操作

入库登记审核生效   流水操作：写入 流水类型：入库 流水状态：已生效    库存操作：写入 库存状态：预入库存
入库登记完成	   流水操作：更新 流水状态：已完成                   库存操作：更新 库存状态：在库正常
入库登记完成撤销   流水操作：更新 流水状态：已生效                   库存操作：更新 库存状态：预入库存
入库登记关闭       流水操作：更新 流水状态：已关闭                   库存操作：更新 库存状态：作废库存

入库回执审核生效   流水操作：更新 回执磅差，回执净重更新             库存操作：更新 库存入库磅差、当前净重更新
入库回执完成       不操作                                            不操作
入库回执完成撤销   不操作					     库存操作：更新 库存入库磅差更新0、当前净重更新
入库回执关闭	   流水操作：更新 回执磅差，回执净重更新为0	     不操作

出库审核生效       流水操作：写入 流水类型：出库 流水状态：已生效    库存操作：更新 库存状态：当前净重==出库净重时，库存状态更新为预售库存
出库完成	   流水操作：更新 流水状态：已完成		     库存操作：更新 库存状态：更新库存当前净重，-出库净重。当前净重为0时，库存状态为预售库存时更新至已售库存
出库完成撤销       流水操作：更新 流水状态：已生效		     库存操作：更新 库存状态：更新库存当前净重，+出库净重。当前净重==出库净重时，库存状态更新至前一状态，否								             则为在库正常
出库关闭	   流水操作：更新 流水状态：关闭		     库存操作：更新 库存状态：库存状态为预售库存时，更新至前一状态，否则不更新

出库回执审核生效   流水操作：更新 回执磅差，回执净重更新             不操作
出库回执完成	   不操作					     库存操作：更新 库存状态：库存出库磅差、当前净重更新
出库回执完成撤销   不操作					     库存操作：更新 库存状态：库存出库磅差为0、当前净重更新
出库回执关闭	   流水操作：更新 回执磅差，回执净重更新为0	     不操作

移库审核生效	   流水操作：写入 流水类型：移库 流水状态：已生效    库存操作：更新 库存状态：预移库存
移库完成	   流水操作：更新 流水状态：已完成		     库存操作：更新 库存状态：更新至前一状态，如前一状态不存在则更新至在库正常
移库完成撤销	   流水操作：更新 流水状态：已生效		     库存操作：更新 库存状态：预移库存
移库关闭	   流水操作：更新 流水状态：已关闭	  	     库存操作：更新 库存状态：更新至前一状态，如前一状态不存在则更新至在库正常

质押审核生效	   流水操作：写入 流水类型：质押 流水状态：已生效    库存操作：更新 库存状态：预押库存
质押完成	   流水操作：更新 流水状态：已完成		     库存操作：更新 库存状态：质押库存
质押完成撤销	   流水操作：更新 流水状态：已生效		     库存操作：更新 库存状态：预押库存
质押关闭	   流水操作：更新 流水状态：已关闭		     库存操作：更新 库存状态：预押库存前一状态，如是质押库存则更新至在库正常

回购审核生效	   流水操作：写入 流水类型：回购 流水状态：已生效    库存操作：更新 库存状态：预回购库存
回购完成	   流水操作：更新 流水状态：已完成		     库存操作：更新 库存状态：在库正常
回购完成撤销	   流水操作：更新 流水状态：已生效		     库存操作：更新 库存状态：预回购库存
回购关闭	   流水操作：更新 流水状态：已关闭		     库存操作：更新 库存状态：预回购库存前一状态，如未有则更新至质押库存

报关审核生效	   流水操作：写入 流水类型：报关 流水状态：已生效    库存操作：更新 库存状态：预报关库存
报关完成	   流水操作：更新 流水状态：已完成		     库存操作：更新 库存状态：更新至前一状态，如前一状态不存在则更新至在库正常
报关完成撤销	   流水操作：更新 流水状态：已生效		     库存操作：更新 库存状态：预报关库存
报关关闭	   流水操作：更新 流水状态：已关闭		     库存操作：更新 库存状态：预报关库存前一状态，如未有则更新至在库正常

拆单审核生效	   流水操作：写入 流水类型：拆单 流水状态：已生效    库存操作：更新 库存状态：预拆库存、新拆库存
拆单完成	   流水操作：更新 流水状态：已完成		     库存操作：更新 库存状态：原库存状态为已拆库存，更新至前一状态，如前一状态不存在则更新至在库正常
拆单完成撤销	   流水操作：更新 流水状态：已生效		     库存操作：更新 库存状态：预拆库存
拆单关闭	   流水操作：更新 流水状态：已关闭		     库存操作：更新 库存状态：原库存状态更新至前一状态，如前一状态不存在则更新至在库正常，新库存状态为作废库									     存  

资金操作

收款分配审核生效   流水操作：写入 流水状态：已生效
收款分配完成	   流水操作：更新 流水状态：已完成
收款分配完成撤销   流水操作：更新 流水状态：已生效
收款分配关闭	   流水操作：更新 流水状态：已关闭

付款审核生效	   流水操作：写入 流水类型：付款 流水状态：已生效 【仅写入实际付款】
付款完成	   流水操作：更新 流水状态：已完成 【同时更新实际付款与虚拟付款的流水】
付款完成撤销	   流水操作：更新 流水状态：已生效 【同时更新实际付款与虚拟付款的流水】
付款关闭	   流水操作：更新 流水状态：已关闭 【同时更新实际付款与虚拟付款的流水】

虚拟付款确认	   流水操作：写入 流水类型：付款 是否虚拟付款：是 流水状态：已生效 【同时写入收付两笔方向相反的虚拟付款流水】 【同时写入已生效收款分配至公司】

